<!DOCTYPE html>
<html lang="en" style="background-color:grey;">
	<head>
		<meta charset="utf-8"/>
		<style>
			.cuadrado{
				background-color: #ffffff;
				position: absolute;
			}

		</style>
		<script>
			window.addEventListener("load", inicio, false);
			var cuadraditos = new Object();
			var pausa = true;
			var tamano = 10;
			
			class Cuadrado{
				constructor(posX, posY){
					this.posX = posX;
					this.posY = posY;
					this.id = this.posX+"|"+this.posY;
					
					this.cuadradoDiv = document.createElement("div");
					
					this.cuadradoDiv.style.width= tamano+"px";
					this.cuadradoDiv.style.height= tamano+"px";
					
					this.cuadradoDiv.classList.add("cuadrado");
					this.cuadradoDiv.style.top=this.posY*tamano +"px";
					this.cuadradoDiv.style.left=this.posX*tamano +"px";
					
					document.body.appendChild(this.cuadradoDiv);
					
					this.cuadradoDiv.style.background = '#' + (function co(lor){   return (lor +=
						  [0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f'][Math.floor(Math.random()*16)])
						  && (lor.length == 6) ?  lor : co(lor); })('');
				}
				
				matar(){
					//console.log(this.cuadradoDiv, "muere");
					this.cuadradoDiv.remove();
					delete cuadraditos[this.id];
				}
			}
			
			class Compro{
				constructor(posX, posY){
					this.posX = posX;
					this.posY = posY;
					this.id = this.posX+"|"+this.posY;
					
					this.vecinos = 1;
				}
			
			}
			
			
			function click(event){
				var x = event.clientX-8;
				var y = event.clientY-8;
				
				x = Math.floor(x/10);
				y = Math.floor(y/10);
				
				var w = window.innerWidth;
				var h = window.innerHeight;
				
				if(cuadraditos[x+"|"+y]){
					
					cuadraditos[x+"|"+y].matar();
					
				}else{
					cuadraditos[x+"|"+y] = new Cuadrado(x,y);
					cuadraditos[(x)+"|"+(y)].cuadradoDiv.style.background = "#5bc0de";
				}
				
				
			}
			function comprobar(){
				var listCompro = new Object();
				for(var i in cuadraditos){
					var c = cuadraditos[i];
					//El mismo
					if(!listCompro[c.posX+"|"+c.posY]){
						listCompro[c.posX+"|"+c.posY] = new Compro(c.posX, c.posY);
						listCompro[c.posX+"|"+c.posY].vecinos--;
					}
					var numeritos = [-1, 0, 1];
					for (const j in numeritos){
						a=numeritos[j];
						for (const k in numeritos){
							b=numeritos[k];
							if(a != 0 || b !=0){
								if(listCompro[(c.posX+a)+"|"+(c.posY+b)]){
									listCompro[(c.posX+a)+"|"+(c.posY+b)].vecinos++;
								}else{
									listCompro[(c.posX+a)+"|"+(c.posY+b)] = new Compro(c.posX+a, c.posY+b);
								}
							}
						}
					}
					
				}

				for(var i in listCompro){
				 var com = listCompro[i];
				 
				 if(com.vecinos == 3){
					if(!cuadraditos[com.id]){
						cuadraditos[com.id] = new Cuadrado(com.posX, com.posY);
					}
				 }else if(com.vecinos<2 || com.vecinos>3){
					if(cuadraditos[com.id]){
						cuadraditos[com.id].matar();
					}
				 }
				}
				
				buscarFiguras();
				
			}
			function buscarFiguras(){
				for(var i in cuadraditos){
					var c = cuadraditos[i];
					var x = c.posX;
					var y = c.posY;
					//cuadrado de 2x2 	oo
					//				  	oo
					if(cuadraditos[(x+1)+"|"+(y)] && cuadraditos[(x)+"|"+(y+1)] && cuadraditos[(x+1)+"|"+(y+1)] &&
						!cuadraditos[(x-1)+"|"+(y)] && !cuadraditos[(x-1)+"|"+(y-1)] && !cuadraditos[(x)+"|"+(y-1)] &&
						!cuadraditos[(x+1)+"|"+(y-1)] && !cuadraditos[(x+2)+"|"+(y-1)] && !cuadraditos[(x+2)+"|"+(y)] &&
						!cuadraditos[(x+2)+"|"+(y+1)] && !cuadraditos[(x+2)+"|"+(y+2)] && !cuadraditos[(x+1)+"|"+(y+2)] &&
						!cuadraditos[(x+1)+"|"+(y-1)] && !cuadraditos[(x)+"|"+(y+2)] && !cuadraditos[(x-1)+"|"+(y+2)] &&
						!cuadraditos[(x+1)+"|"+(y-1)] && !cuadraditos[(x-1)+"|"+(y+1)]){
							
							cuadraditos[(x)+"|"+(y)].cuadradoDiv.style.background = "#C10000";
							cuadraditos[(x+1)+"|"+(y)].cuadradoDiv.style.background = "#C10000";
							cuadraditos[(x)+"|"+(y+1)].cuadradoDiv.style.background = "#C10000";
							cuadraditos[(x+1)+"|"+(y+1)].cuadradoDiv.style.background = "#C10000";
						
					}
					//linea de 3x1 o 1x3	ooo		o
					//								o
					//								o
					if(cuadraditos[(x-1)+"|"+(y)] && cuadraditos[(x+1)+"|"+(y)] && !cuadraditos[(x-2)+"|"+(y)] &&
						!cuadraditos[(x-2)+"|"+(y-1)] && !cuadraditos[(x-1)+"|"+(y-1)] &&!cuadraditos[(x)+"|"+(y-1)] &&
						!cuadraditos[(x+1)+"|"+(y-1)] && !cuadraditos[(x+2)+"|"+(y-1)] && !cuadraditos[(x+2)+"|"+(y)] &&
						!cuadraditos[(x+2)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+1)] && !cuadraditos[(x)+"|"+(y+1)] &&
						!cuadraditos[(x-1)+"|"+(y+1)] && !cuadraditos[(x-2)+"|"+(y+1)]){
							
							cuadraditos[(x)+"|"+(y)].cuadradoDiv.style.background = "#4E7454";
							cuadraditos[(x-1)+"|"+(y)].cuadradoDiv.style.background = "#4E7454";
							cuadraditos[(x+1)+"|"+(y)].cuadradoDiv.style.background = "#4E7454";
					}
					if(cuadraditos[(x)+"|"+(y-1)] && cuadraditos[(x)+"|"+(y+1)] &&
						!cuadraditos[(x-1)+"|"+(y)] && !cuadraditos[(x-1)+"|"+(y-1)] && !cuadraditos[(x)+"|"+(y-2)] &&
						!cuadraditos[(x+1)+"|"+(y-2)] && !cuadraditos[(x+1)+"|"+(y-1)] && !cuadraditos[(x+1)+"|"+(y)] &&
						!cuadraditos[(x+1)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y)] && !cuadraditos[(x+1)+"|"+(y+2)] && 
						!cuadraditos[(x)+"|"+(y+2)] && !cuadraditos[(x-1)+"|"+(y+2)] && !cuadraditos[(x-1)+"|"+(y+1)]){
						
							cuadraditos[(x)+"|"+(y-1)].cuadradoDiv.style.background = "#4E7454";
							cuadraditos[(x)+"|"+(y)].cuadradoDiv.style.background = "#4E7454";
							cuadraditos[(x)+"|"+(y+1)].cuadradoDiv.style.background = "#4E7454";
					
					}
					//  oo		 o
					// o  o		o o
					//	oo		o o
					//			 o
					if(!cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+0)+"|"+(y+-1)]){
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#FFE796";
					}
					
					if(cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+2)+"|"+(y+0)] && !cuadraditos[(x+1)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+-1)] && !cuadraditos[(x+0)+"|"+(y+1)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+-1)] && !cuadraditos[(x+-1)+"|"+(y+0)]){
						cuadraditos[(x+1)+"|"+(y+0)].cuadradoDiv.style.background = "#FFE796";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#FFE796";
					}
					
					if(cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+2)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+1)] && !cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+-1)]){
						cuadraditos[(x+0)+"|"+(y+1)].cuadradoDiv.style.background = "#FFE796";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#FFE796";
					}
					
					
					
					//nave abajo derecha
					if(cuadraditos[(x+-1)+"|"+(y+2)] && !cuadraditos[(x+-2)+"|"+(y+1)] && !cuadraditos[(x+-2)+"|"+(y+2)] && !cuadraditos[(x+-2)+"|"+(y+3)] && !cuadraditos[(x+-1)+"|"+(y+1)] && !cuadraditos[(x+-1)+"|"+(y+3)] && !cuadraditos[(x+0)+"|"+(y+1)] && cuadraditos[(x+0)+"|"+(y+2)] && !cuadraditos[(x+0)+"|"+(y+3)] && cuadraditos[(x+1)+"|"+(y+1)] && cuadraditos[(x+1)+"|"+(y+2)] && !cuadraditos[(x+1)+"|"+(y+3)] && !cuadraditos[(x+2)+"|"+(y+1)] && !cuadraditos[(x+2)+"|"+(y+2)] && !cuadraditos[(x+2)+"|"+(y+3)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+2)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+-1)] && !cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+-1)] && !cuadraditos[(x+1)+"|"+(y+-1)]){
						cuadraditos[(x+-1)+"|"+(y+2)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+0)+"|"+(y+2)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+1)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+1)+"|"+(y+2)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#DEC6EE";
					}
					if(cuadraditos[(x+1)+"|"+(y+1)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+0)+"|"+(y+2)] && !cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+1)+"|"+(y+2)] && cuadraditos[(x+2)+"|"+(y+0)] && cuadraditos[(x+2)+"|"+(y+1)] && !cuadraditos[(x+2)+"|"+(y+2)] && !cuadraditos[(x+3)+"|"+(y+0)] && !cuadraditos[(x+3)+"|"+(y+1)] && !cuadraditos[(x+3)+"|"+(y+2)] && !cuadraditos[(x+1)+"|"+(y+-1)] && cuadraditos[(x+2)+"|"+(y+-1)] && !cuadraditos[(x+3)+"|"+(y+-1)] && !cuadraditos[(x+1)+"|"+(y+-2)] && !cuadraditos[(x+2)+"|"+(y+-2)] && !cuadraditos[(x+3)+"|"+(y+-2)] && !cuadraditos[(x+-1)+"|"+(y+-1)] && !cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+1)] && !cuadraditos[(x+0)+"|"+(y+-1)]){
						cuadraditos[(x+1)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+2)+"|"+(y+0)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+2)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+2)+"|"+(y+-1)].cuadradoDiv.style.background = "#DEC6EE";
					}
					if(cuadraditos[(x+2)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+0)] && cuadraditos[(x+1)+"|"+(y+1)] && cuadraditos[(x+1)+"|"+(y+2)] && cuadraditos[(x+2)+"|"+(y+0)] && !cuadraditos[(x+2)+"|"+(y+2)] && !cuadraditos[(x+3)+"|"+(y+0)] && !cuadraditos[(x+3)+"|"+(y+1)] && !cuadraditos[(x+3)+"|"+(y+2)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+-1)] && !cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+1)] && !cuadraditos[(x+0)+"|"+(y+-1)] && !cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+-1)] && !cuadraditos[(x+0)+"|"+(y+2)] && !cuadraditos[(x+0)+"|"+(y+3)] && !cuadraditos[(x+1)+"|"+(y+3)] && !cuadraditos[(x+2)+"|"+(y+3)] && !cuadraditos[(x+2)+"|"+(y+-1)] && !cuadraditos[(x+3)+"|"+(y+-1)]){
						cuadraditos[(x+2)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+1)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+1)+"|"+(y+2)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+2)+"|"+(y+0)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#DEC6EE";
					}
					if(cuadraditos[(x+2)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+0)] && cuadraditos[(x+1)+"|"+(y+1)] && cuadraditos[(x+1)+"|"+(y+2)] && !cuadraditos[(x+2)+"|"+(y+0)] && !cuadraditos[(x+2)+"|"+(y+2)] && !cuadraditos[(x+3)+"|"+(y+0)] && !cuadraditos[(x+3)+"|"+(y+1)] && !cuadraditos[(x+3)+"|"+(y+2)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+-1)] && !cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+1)] && !cuadraditos[(x+0)+"|"+(y+-1)] && !cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+-1)] && cuadraditos[(x+0)+"|"+(y+2)] && !cuadraditos[(x+0)+"|"+(y+3)] && !cuadraditos[(x+1)+"|"+(y+3)] && !cuadraditos[(x+2)+"|"+(y+3)] && !cuadraditos[(x+-1)+"|"+(y+2)] && !cuadraditos[(x+-1)+"|"+(y+3)]){
						cuadraditos[(x+2)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+1)+"|"+(y+1)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+1)+"|"+(y+2)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#DEC6EE";
						cuadraditos[(x+0)+"|"+(y+2)].cuadradoDiv.style.background = "#DEC6EE";
					}
					//	 oo
					//	o o
					//	oo
					if(cuadraditos[(x+0)+"|"+(y+-1)] && !cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+1)+"|"+(y+-1)] && !cuadraditos[(x+1)+"|"+(y+-2)] && cuadraditos[(x+0)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+-2)] && cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+-1)+"|"+(y+-1)] && cuadraditos[(x+-1)+"|"+(y+-2)] && !cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+-1)+"|"+(y+1)] && !cuadraditos[(x+-2)+"|"+(y+1)] && !cuadraditos[(x+-2)+"|"+(y+0)] && cuadraditos[(x+-2)+"|"+(y+-1)] && !cuadraditos[(x+0)+"|"+(y+-3)] && !cuadraditos[(x+-1)+"|"+(y+-3)] && cuadraditos[(x+-2)+"|"+(y+-2)] && !cuadraditos[(x+-2)+"|"+(y+-3)] && !cuadraditos[(x+-3)+"|"+(y+-1)] && !cuadraditos[(x+-3)+"|"+(y+-2)] && !cuadraditos[(x+-3)+"|"+(y+-3)] && !cuadraditos[(x+-3)+"|"+(y+0)] && !cuadraditos[(x+1)+"|"+(y+1)]){
						cuadraditos[(x+0)+"|"+(y+-1)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-1)+"|"+(y+0)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-1)+"|"+(y+-2)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-2)+"|"+(y+-1)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-2)+"|"+(y+-2)].cuadradoDiv.style.background = "#CC5D5D";
					}
					if(cuadraditos[(x+0)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+2)] && !cuadraditos[(x+1)+"|"+(y+1)] && !cuadraditos[(x+1)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+2)] && cuadraditos[(x+0)+"|"+(y+0)] && cuadraditos[(x+-1)+"|"+(y+2)] && cuadraditos[(x+-1)+"|"+(y+0)] && !cuadraditos[(x+0)+"|"+(y+3)] && !cuadraditos[(x+-1)+"|"+(y+3)] && !cuadraditos[(x+-2)+"|"+(y+3)] && cuadraditos[(x+-2)+"|"+(y+2)] && cuadraditos[(x+-2)+"|"+(y+1)] && !cuadraditos[(x+0)+"|"+(y+-1)] && !cuadraditos[(x+-1)+"|"+(y+-1)] && !cuadraditos[(x+-2)+"|"+(y+0)] && !cuadraditos[(x+-2)+"|"+(y+-1)] && !cuadraditos[(x+-3)+"|"+(y+2)] && !cuadraditos[(x+-3)+"|"+(y+1)] && !cuadraditos[(x+-3)+"|"+(y+0)]){
						cuadraditos[(x+0)+"|"+(y+1)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+0)+"|"+(y+0)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-1)+"|"+(y+2)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-1)+"|"+(y+0)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-2)+"|"+(y+2)].cuadradoDiv.style.background = "#CC5D5D";
						cuadraditos[(x+-2)+"|"+(y+1)].cuadradoDiv.style.background = "#CC5D5D";
					}
					
				}
			}
			
			function mover(){
				if(!pausa){
					comprobar();
				}
			}
			
			function pausar(){
				if(pausa){
					pausa = false;
				}else{
					pausa = true;
				}
			}
			
			function inicio(){
				document.addEventListener("click",click);
				alert("JUEGO DE LA VIDA: \n pulsa click para crear la celulas y P para iniciar o pausar");
				
				document.addEventListener('keydown', function(event) {
													if (event.code == 'KeyP') {
														pausar();
													}
													if (event.code == 'KeyN') {
														comprobar();
													}
												});
												
				movimiento = setInterval(mover,1000/60); //60fps
			}
		
		</script>
	</head>
	<body style="position: relative">

	</body>
</html>